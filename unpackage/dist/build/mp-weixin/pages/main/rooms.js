(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/main/rooms"],{"152c":function(t,e,o){"use strict";var n,r=function(){var t=this,e=t.$createElement;t._self._c},a=[];o.d(e,"b",function(){return r}),o.d(e,"c",function(){return a}),o.d(e,"a",function(){return n})},"1cb7":function(t,e,o){"use strict";var n=o("e25b"),r=o.n(n);r.a},"4abb":function(t,e,o){"use strict";o.r(e);var n=o("152c"),r=o("ef58");for(var a in r)"default"!==a&&function(t){o.d(e,t,function(){return r[t]})}(a);o("1cb7");var i,s=o("f0c5"),u=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);e["default"]=u.exports},"792a":function(t,e,o){"use strict";(function(t){o("d394"),o("921b");n(o("66fd"));var e=n(o("4abb"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"9cad":function(t,e,o){"use strict";(function(t){function n(t){return i(t)||a(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(t){if(Array.isArray(t)){for(var e=0,o=new Array(t.length);e<t.length;e++)o[e]=t[e];return o}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){return o.e("components/uni-load-more/uni-load-more").then(o.bind(null,"a5ec"))},u=function(){return o.e("components/uni-fab/uni-fab").then(o.bind(null,"26b2"))},c={components:{uniLoadMore:s,uniFab:u},data:function(){return{TabCur:0,scrollLeft:0,owners:[],rooms:[],roomindex:0,currroomid:"",onevent:"updateroomowner",requestParams:{},title:"",currpage:1,loadStatus:"more",baseUrl:this.baseurl,pagesize:20,scrollviewHeight:400}},mounted:function(){var e=this,o=t.createSelectorQuery().in(this),n=o.select("#fiexdview");n.boundingClientRect(function(t){var o=t.height;0==o&&(o=55),e.scrollviewHeight=e.phoneHeight-o-e.CustomBar}).exec()},onLoad:function(e){var o=this;this.requestParams=e,this.title=this.requestParams.build+this.requestParams.unit+this.requestParams.storey,this.title=decodeURIComponent(this.title),t.showLoading({title:"加载中...",mask:!0});var n=this.$common.getParams();n.id=this.requestParams.storeyid,this.$api.rooms(n,function(e){e.success?(o.rooms=e.data,o.currpage=1,o.rooms.length<o.pagesize&&(o.loadStatus="noMore"),o.owners=o.rooms[0].owners,o.TabCur=o.rooms[0].id,o.scrollLeft=-60):o.$common.errorToShow(e.message,function(){t.navigateBack({})})}),t.$on(this.onevent,function(t){var e=t.updatetype;"roomusers"==e&&this.initdatas()}.bind(this))},onReady:function(){t.hideLoading()},methods:{pageToLower:function(t){console.log("this.loadStatus===="+this.loadStatus),"more"==this.loadStatus&&(this.currpage=this.currpage+1,this.initdatas(function(){},"up"))},initdatas:function(t,e){var o=this,r=this.$common.getParams();this.loadStatus="loading",r.currpage=this.currpage,r.pagesize=this.pagesize,r.id=this.TabCur,this.$api.roomusers(r,function(r){r.success?(o.owners="up"==e?[].concat(n(o.owners),n(r.data)):r.data,o.pagesize<r.data.length?(o.loadStatus="more",o.currpage++):o.loadStatus="noMore",console.log("that.loadStatus===="+o.loadStatus),t&&t()):o.$common.errorToShow(r.message)})},tabSelect:function(t){this.roomindex=t.currentTarget.dataset.index,this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.index-1);for(var e=0;e<this.rooms.length;e++){var o=this.rooms[e];this.TabCur==o.id&&(this.owners=o.owners)}},addOwner:function(t){var e=new Object;e.floorindex=this.requestParams.floorindex,e.roomindex=this.roomindex,e.storeyid=this.requestParams.storeyid,e.room_id=this.TabCur,e.onevent=this.onevent,this.$common.navigateTo("../main/addOwner",e)},openRecords:function(t){var e=new Object;e.userid=t.currentTarget.dataset.userid,e.qrcode=t.currentTarget.dataset.qrcode,this.$common.navigateTo("./records",e)}},onPullDownRefresh:function(){this.currpage=1,this.recods=[],this.initdatas(function(){t.stopPullDownRefresh()})},onReachBottom:function(){this.currpage=this.currpage+1,this.initdatas(function(){},"up"),console.log("已加载到底部")}};e.default=c}).call(this,o("543d")["default"])},e25b:function(t,e,o){},ef58:function(t,e,o){"use strict";o.r(e);var n=o("9cad"),r=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);e["default"]=r.a}},[["792a","common/runtime","common/vendor"]]]);