(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/main/index"],{"9da4":function(t,e,n){"use strict";var o=n("e7a5"),a=n.n(o);a.a},a3b2:function(t,e,n){"use strict";n.r(e);var o=n("c2f6"),a=n("cd74");for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);n("9da4");var r,s=n("f0c5"),c=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);e["default"]=c.exports},c2f6:function(t,e,n){"use strict";var o,a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",function(){return a}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o})},cd74:function(t,e,n){"use strict";n.r(e);var o=n("ffd6"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=a.a},e7a5:function(t,e,n){},fdef:function(t,e,n){"use strict";(function(t){n("d394"),n("921b");o(n("66fd"));var e=o(n("a3b2"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},ffd6:function(t,e,n){"use strict";(function(t){function o(t){return r(t)||i(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function r(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){return n.e("components/uni-fab/uni-fab").then(n.bind(null,"26b2"))},c=function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"a5ec"))},u={components:{uniLoadMore:c,uniFab:s},data:function(){return{recods:[],owners:[],ads:[],modalName:null,gridCol:3,gridBorder:!1,menuBorder:!1,menuArrow:!1,menuCard:!1,skin:!1,listTouchStart:0,listTouchDirection:null,onevent:"mainindex",loadStatus:"more",currpage:1,pagesize:20,initpagedata:!1,scrollviewHeight:0,scrollTop:5,timer:null,webUser:this.$webUser(),baseUrl:this.baseurl}},onLaunch:function(){},mounted:function(){var e=this;if(null!=this.webUser){var n=t.createSelectorQuery().in(this),o=n.select("#datasview");o.boundingClientRect(function(t){if(null!=t){var n=t.top;e.StatusBar<50&&(e.StatusBar=50),e.scrollviewHeight=e.phoneHeight-n-e.StatusBar}}).exec()}this.initpagedata=!0;var a=new Object;a.type="首页广告",this.$api.ADList(a,function(t){t.success?e.ads=t.data:e.$common.errorToShow(t.message)}),this.initdatas(),t.$on(this.onevent,function(e){var n=e.updatetype;"updaterecode"==n?this.initdatas():"pulldown"==n?(this.currpage=1,this.viewlist=[],this.initdatas(function(){t.stopPullDownRefresh()})):"pullup"==n?(this.currpage=this.currpage+1,this.initdatas(function(){},"up"),console.log("已加载到底部")):"roomusers"==n&&(this.currpage=1,this.viewlist=[],this.initdatas(function(){t.stopPullDownRefresh()}))}.bind(this))},methods:{pageToLower:function(t){"more"==this.loadStatus&&(this.currpage=this.currpage+1,this.initdatas(function(){},"up"))},openRecod:function(t){var e=t.currentTarget.dataset.id,n=new Object;n.recodeid=e,this.$common.navigateTo("./main/viewRegister",n)},initfamily:function(t,e){var n=this,a=this.$common.getParams();this.loadStatus="loading",a.currpage=this.currpage,a.pagesize=this.pagesize,a.id=this.webUser.roomid,this.$api.roomusers(a,function(a){a.success?(n.owners="up"==e?[].concat(o(n.owners),o(a.data)):a.data,n.pagesize<a.data.length?(n.loadStatus="more",n.currpage++):n.loadStatus="noMore",console.log("that.loadStatus===="+n.loadStatus),t&&t()):n.$common.errorToShow(a.message)})},initdatas:function(t,e){if("业主"!=this.webUser.rolename){var n=this,a=this.$common.getParams();this.loadStatus="loading",a.currpage=this.currpage,a.pagesize=this.pagesize,a.id="",a.type="",this.$api.recods(a,function(a){a.success?(n.recods="up"==e?[].concat(o(n.recods),o(a.data)):a.data,n.pagesize<a.data.length?(n.loadStatus="more",n.currpage++):n.loadStatus="noMore",t&&t()):n.$common.errorToShow(a.message)})}else this.initfamily(t,e)},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=null},shareApp:function(t){var e=new Object;e.onevent=this.onevent,this.$common.navigateTo("./main/shareApp",e)},addOwner:function(t){var e=new Object;e.onevent=this.onevent,this.$common.navigateTo("./main/addOwner",e)},addFamily:function(t){var e=new Object;e.onevent=this.onevent,e.room_id=this.webUser.roomId,this.$common.navigateTo("./main/addFamily",e)},manager:function(t){var e=new Object;e.onevent=this.onevent,this.$common.navigateTo("./main/manager",e)},registerCode:function(e){var n=this;t.scanCode({onlyFromCamera:!1,scanType:["qrCode"],success:function(t){console.log("条码类型："+t.scanType),console.log("条码内容："+t.result),console.log("reuslt==========="+t.result);var e=t.result,o=new Object;o.onevent=n.onevent,o.ownerid=e,n.$common.navigateTo("./main/register",o)},fail:function(t){n.$common.errorToShow(t.errMsg)}})},openActicle:function(t){var e=t.currentTarget.dataset.id,n=new Object;n.articleid=e,this.$common.navigateTo("./notice/article",n)},openAds:function(t){var e=t.currentTarget.dataset.isurl,n=t.currentTarget.dataset.url,o=new Object;if("1"==e)o.src=n,this.$common.navigateTo("/pages/notice/webview",o);else{var a=t.currentTarget.dataset.id;o.articleid=a,this.$common.navigateTo("./notice/ads",o)}},openRecords:function(t){var e=new Object;e.userid=t.currentTarget.dataset.userid,e.qrcode=t.currentTarget.dataset.qrcode,this.$common.navigateTo("/pages/main/records",e)},postAffair:function(t){this.$common.navigateTo("/pages/main/addAffair",{})},location:function(e){var n=this;this.$common.loadToShow(),t.getLocation({type:"gcj02",success:function(e){n.$common.loadToHide();var o=e.address,a="";o&&(o.country&&(a+=o.country),o.province&&(a+=o.province),o.city&&(a+=o.city),o.district&&(a+=o.district),o.street&&(a+=o.street),o.streetNum&&(a+=o.streetNum),o.poiName&&(a+=o.poiName)),e&&(console.log("========================"),n.$common.errorToShow("请确认地址正确后点击返回键！",function(){t.openLocation({latitude:e.latitude,longitude:e.longitude,success:function(){n.$common.modelShow("签到签退","已获取当前位置"+a+"，是否确认签到签退？",function(){var t=n.$common.getParams("location");t.longitude=e.longitude,t.latitude=e.latitude,t.address=e.address,n.$api.location(t,function(t){t.success?n.$common.successToShow("执行签到成功"):n.$common.errorToShow(t.message)})})}})}))},fail:function(t){n.$common.errorToShow("定位失败"+JSON.stringify(t))}})}}};e.default=u}).call(this,n("543d")["default"])}},[["fdef","common/runtime","common/vendor"]]]);