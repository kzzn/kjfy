(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/main/addOwner"],{"0c7a":function(r,t,e){"use strict";(function(r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={data:function(){return{barColor:this.barColor,bgColor:this.bgColor,owner:{},multiArray:[[],[],[]],rooms:[],roomsPicker:[],roomindex:"0",room_id:"",idcardfocus:!1,phonefocus:!1,namefocus:!1,room_idfocus:!1,addrfocus:!1,floorlist:[],multiIndex:[0,0,0],layerid:"",requestParams:""}},onLoad:function(r){var t=this;this.requestParams=r,this.$api.floorlist({},function(r){var e=r.data;t.floorlist=e;var i=new Array,o=new Array,a=new Array,n=new Array,s=t.requestParams.storeyid;if(o=t.entryArray(e),s&&null!=s){t.multiIndex=t.requestParams.floorindex.split(",");var u=t.floorlist[t.multiIndex[0]],l=u.units[t.multiIndex[1]];console.log("initunit====="+JSON.stringify(l)),a=t.entryArray(u.units),console.log("unitArray====="+JSON.stringify(a)),n=t.entryArray(l.layers)}else a=t.entryArray(e[0].units),n=t.entryArray(e[0].units[0].layers);i.push(o),i.push(a),i.push(n),t.multiArray=i,console.log(JSON.stringify(t.multiArray));var d=new Object;d.detail=new Object,d.detail["value"]=t.multiIndex,t.MultiChange(d)})},methods:{entryArray:function(r){for(var t=new Array,e=0;e<r.length;e++){var i=r[e];t.push(i.name)}return t},RomeChange:function(r){this.roomindex=r.detail.value,this.room_id=this.rooms[r.detail.value].id,console.log(this.room_id+"======room_id")},MultiChange:function(r){var t=this;this.multiIndex=r.detail.value,this.layerid=this.floorlist[this.multiIndex[0]].units[this.multiIndex[1]].layers[this.multiIndex[2]].id,this.$api.rooms({id:this.layerid},function(r){if(r.success){t.rooms=r.data;var e=t.entryArray(r.data);t.roomsPicker=e;var i=t.requestParams.room_id;i&&null!=i?(t.room_id=i,t.roomindex=t.requestParams.roomindex):t.room_id=t.rooms[0].id}else t.$common.errorToShow("获取楼层房间失败=="+r.message)})},MultiColumnChange:function(r){console.log("变化前===="+JSON.stringify(this.multiArray));var t={dataArray:[],dataIndex:this.multiIndex};switch(t.dataIndex[r.detail.column]=r.detail.value,r.detail.column){case 0:t.dataArray[0]=this.multiArray[0],t.dataArray[1]=this.entryArray(this.floorlist[t.dataIndex[0]].units),t.dataArray[2]=this.entryArray(this.floorlist[t.dataIndex[0]].units[0].layers),t.dataIndex[1]=0,t.dataIndex[2]=0;break;case 1:t.dataArray[0]=this.multiArray[0],t.dataArray[1]=this.multiArray[1];var e=this.floorlist[t.dataIndex[0]].units[t.dataIndex[1]].layers;t.dataArray[2]=this.entryArray(e),t.dataIndex[2]=0;break;default:t.dataArray=this.multiArray;break}this.multiArray=t.dataArray,this.multiIndex=t.dataIndex,console.log("变化后===="+JSON.stringify(this.multiArray))},discriCard:function(){var r=this.owner.cardid;r.substring(6,10),r.substring(10,12),r.substring(12,14),parseInt(r.substr(16,1))%2==1?this.owner.sex="男":this.owner.sex="那个";var t=new Date,e=t.getMonth()+1,i=t.getDate(),o=t.getFullYear()-r.substring(6,10)-1;(r.substring(10,12)<e||r.substring(10,12)==e&&r.substring(12,14)<=i)&&o++,this.owner.age=o},saveOwner:function(t){var e=this,i=this.$common.isPhoneNumber(this.owner.phone);if(!i)return this.$common.errorToShow("请输入正确的手机号码"),void(this.phonefocus=!0);var o=this.$common.isCardNumber(this.owner.cardid);if(!o)return this.$common.errorToShow("请输入正确的身份证号"),void(this.idcardfocus=!0);if(this.discriCard(),!this.$common.isBlack(this.owner.name))return this.$common.errorToShow("姓名必须填写"),void(this.idnamefocus=!0);if(this.$common.isBlack(this.room_id))if(this.$common.isBlack(this.layerid)){var a=this.$common.getParams("saveOwner",this.owner);a.roomId=this.room_id,console.log("ownerparam==============="+JSON.stringify(a)),this.$common.modelShow("确认保存","您是否确定保存业主信息？",function(){e.$api.saveOwner(a,function(t){t.success?e.$common.successToShow("保存成功",function(){e.requestParams.onevent&&""!=e.requestParams.onevent&&r.$emit(e.requestParams.onevent,{updatetype:"roomusers",params:{}}),r.navigateBack({})}):e.$common.errorToShow(t.message,function(){})})})}else this.$common.errorToShow("住址必须选择");else this.$common.errorToShow("门牌号必须选择")}}};t.default=e}).call(this,e("c11b")["default"])},"2abb":function(r,t,e){"use strict";var i,o=function(){var r=this,t=r.$createElement;r._self._c},a=[];e.d(t,"b",function(){return o}),e.d(t,"c",function(){return a}),e.d(t,"a",function(){return i})},"7b04":function(r,t,e){"use strict";(function(r){e("d394"),e("921b");i(e("66fd"));var t=i(e("e1ba"));function i(r){return r&&r.__esModule?r:{default:r}}r(t.default)}).call(this,e("c11b")["createPage"])},"98f0":function(r,t,e){"use strict";e.r(t);var i=e("0c7a"),o=e.n(i);for(var a in i)"default"!==a&&function(r){e.d(t,r,function(){return i[r]})}(a);t["default"]=o.a},e1ba:function(r,t,e){"use strict";e.r(t);var i=e("2abb"),o=e("98f0");for(var a in o)"default"!==a&&function(r){e.d(t,r,function(){return o[r]})}(a);var n,s=e("f0c5"),u=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],n);t["default"]=u.exports}},[["7b04","common/runtime","common/vendor"]]]);